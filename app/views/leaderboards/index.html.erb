<div class='content'>
  <%= concept(Challenge::Cell::ChallengeMasthead,
                @challenge,
                current_participant: current_participant) %>
  <%= render partial: 'challenges/show/subnav',
        locals: { challenge: @challenge } %>
  <%= concept(Leaderboard::Cell::ChallengeRoundPills,
                @challenge,
                current_round: @current_round,
                current_participant: current_participant) %>

  <% if @current_round.leaderboard_note.present? %>
    <div class='row'>
      <div class="leaderboard-note">
        <%= sanitize(@current_round.leaderboard_note) %>
      </div>
    </div>
  <% end %>

  <div class="row">
    <% if policy(@challenge).show_leaderboard? %>
      <% unless @challenge.show_leaderboard? %>
        <div class="leaderboard-important-msg">
          <p>Leaderboard is only visible to organizers</p>
        </div>
      <% end %>
      <table class="leaderboard">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th class="change">Î”</th>
            <th class="position">#</th>
            <th class="participant">Participant</th>
            <% if @p.cols.include?(:media) %>
              <th class="video">Media</th>
            <% end %>
            <th class="score"><%= @challenge.score_title %></th>
            <% if @p.cols.include?(:score_secondary) %>
              <th class="score"><%= @challenge.score_secondary_title %></th>
            <% end %>
            <th class="entries">Entries</th>
            <% if @p.cols.include?(:post_challenge) %>
              <th class="post-challenge"></th>
            <% end %>
            <th class="last-submission">Last Submission (UTC)</th>
            <th class="action"></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <%= render @leaderboards %>
        </tbody>
      </table>
    <% else %>
      <div class="leaderboard-msg">
        <p>Leaderboard is not displayed yet.</p>
      </div>
    <% end %>
  </div>

  <% if @post_challenge == 'off' %>
    <%= render partial: 'post_challenge_off',
          locals: { challenge: @challenge } %>
  <% end %>
  <% if @post_challenge == 'on' %>
    <%= render partial: 'post_challenge_on',
          locals: { challenge: @challenge } %>
  <% end %>

  <span id='more-anchor'></span>
  <%= render partial: 'shared/load_more',
        locals: { collection: @leaderboards } %>
  <div id='modal-anchor'></div>
</div>
